(()=>{function M(e){document.readyState!="loading"?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",function(){document.readyState!="loading"&&e()})}function y(e,t){if(e!==null)for(var r of Object.keys(t||{}))e.style[r]=t[r]}function g(e){return(e||"").replace(/\[([^\]]+)\]\(([^\)]+)\)/g,'<a href="$2">$1</a>').replace(/\*\*\s?([^\n]+)\*\*/g,"<b>$1</b>").replace(/\_\_\s?([^\n]+)\_\_/g,"<b>$1</b>").replace(/\*\s?([^\n]+)\*/g,"<i>$1</i>").replace(/\_\s?([^\n]+)\_/g,"<i>$1</i>")}function v(e,t,r){if(!(t==null||t==="")){var n=document.createElement("a");n.setAttribute("href","#"+e),n.classList.add("consent-banner-button"),n.textContent=t,r.appendChild(n)}}function b(e,t,r){if(e===null)return null;e.addEventListener&&e.addEventListener(t,r),e.forEach&&e.forEach(n=>n.addEventListener(t,r))}function p(e){document.body.dispatchEvent(new CustomEvent("consent-banner."+e))}function S(e){return e!==null}function q(){return console.warn("ConsentBannerJS: loadConsentState function is not provided"),null}function f(e){return console.warn("ConsentBannerJS: saveConsentState function is not provided"),null}function C(e){var r;var t=document.createElement("div");return t.setAttribute("id","consent-banner-main"),t.setAttribute("data-mode",e.display.mode),t.setAttribute("data-wall",(r=e.display.wall)!=null?r:!1),t.style.display="none",t}function D(e){var t=document.createElement("div");return t.setAttribute("id","consent-banner-wall"),t}function _(e){var t=document.createElement("div");t.style.display="none",t.setAttribute("id","consent-banner-modal"),t.innerHTML='<div class="consent-banner-modal-wrapper"><div><h2></h2><p></p></div><div class="consent-banner-modal-buttons"></div></div>',t.querySelector("h2").textContent=e.modal.title,t.querySelector("p").innerHTML=g(e.modal.description);var r=t.querySelector(".consent-banner-modal-buttons");return v("settings",e.modal.buttons.settings,r),v("close",e.modal.buttons.close,r),v("reject",e.modal.buttons.reject,r),v("accept",e.modal.buttons.accept,r),t}function k(e,t){var r=S(t),n=document.createElement("div");n.setAttribute("id","consent-banner-settings"),n.style.display="none",n.innerHTML='<div><form><h2></h2><div><p></p><ul></ul></div><div class="consent-banner-settings-buttons"></div></form></div>',n.querySelector("h2").textContent=e.settings.title,n.querySelector("p").innerHTML=g(e.settings.description);var i=n.querySelector(".consent-banner-settings-buttons");v("reject",e.settings.buttons.reject,i),v("close",e.settings.buttons.close,i),v("save",e.settings.buttons.save,i),v("accept",e.settings.buttons.accept,i);var a=e.consent_types;for(var o of Object.keys(a||{})){var s=document.createElement("li"),l=document.createElement("label"),d=document.createElement("p"),u=document.createElement("input");u.setAttribute("type","hidden"),u.setAttribute("name",a[o].name),u.setAttribute("value","denied");var c=document.createElement("input");c.setAttribute("type","checkbox"),c.setAttribute("name",a[o].name),c.setAttribute("value","granted"),c.setAttribute("id",a[o].name),(r&&t[a[o].name]==="granted"||!r&&a[o].default==="granted")&&c.setAttribute("checked","checked"),(r&&t[a[o].name]==="denied"||!r&&a[o].default==="denied")&&c.removeAttribute("checked"),a[o].default==="required"&&(c.setAttribute("checked","checked"),c.setAttribute("disabled","disabled"),u.setAttribute("value","granted")),l.textContent=a[o].title,l.setAttribute("for",a[o].name),d.innerHTML=g(a[o].description),s.appendChild(u),s.appendChild(c),s.appendChild(l),s.appendChild(d),n.querySelector("ul").appendChild(s)}return n}function h(e,t,r){var n=S(r),i=t.consent_types;for(var a of Object.keys(i||{})){var o=e.querySelector('[type="checkbox"][name="'+i[a].name+'"]');(n&&r[i[a].name]==="granted"||!n&&i[a].default==="granted")&&o.setAttribute("checked","checked"),(n&&r[i[a].name]==="denied"||!n&&i[a].default==="denied")&&o.removeAttribute("checked"),i[a].default==="required"&&(o.setAttribute("checked","checked"),o.setAttribute("disabled","disabled"))}}function m(e){e.style.display="none",L(e)}function j(e){var t=e.querySelector("#consent-banner-wall");t.style.background="rgba(0, 0, 0, .7)",t.style.position="fixed",t.style.top="0",t.style.right="0",t.style.left="0",t.style.bottom="0"}function L(e){var t=e.querySelector("#consent-banner-wall");t.style.position="static",t.style.background="none"}function A(e){e.style.display="block",e.querySelector("#consent-banner-modal").style.display="block"}function E(e){e.style.display="block",e.querySelector("#consent-banner-modal").style.display="none"}function w(e){e.style.display="block",e.querySelector("#consent-banner-settings").style.display="block",j(e)}function O(e){e.style.display="block",e.querySelector("#consent-banner-settings").style.display="none",(e.getAttribute("data-wall")!=="true"||S(q()))&&L(e)}function T(e){var t=document.querySelector("body"),r=q(),n=C(e),i=D(e),a=_(e),o=k(e,r);n.appendChild(i),i.appendChild(a),i.appendChild(o),b(o.querySelector('[href="#accept"]'),"click",function(s){s.preventDefault();var l=e.consent_types,d={};for(var u of Object.keys(l||{})){var c=l[u].name;d[c]="granted"}h(o,e,d),f(d),m(n),p("hidden")}),b(a.querySelector('[href="#accept"]'),"click",function(s){s.preventDefault();var l=e.consent_types,d={};for(var u of Object.keys(l||{})){var c=l[u].name;d[c]="granted"}h(o,e,d),f(d),m(n),p("hidden")}),b(o.querySelector('[href="#close"]'),"click",function(s){s.preventDefault(),O(n),S(q())?p("hidden"):A(n)}),b(a.querySelector('[href="#settings"]'),"click",function(s){s.preventDefault(),E(n),w(n),p("shown")}),b(a.querySelector('[href="#reject"]'),"click",function(s){s.preventDefault();var l=e.consent_types,d={};for(var u of Object.keys(l||{})){var c=l[u].name;d[c]="denied"}f(d),h(o,e,d),m(n),p("hidden")}),b(o.querySelector('[href="#reject"]'),"click",function(s){s.preventDefault();var l=e.consent_types,d={};for(var u of Object.keys(l||{})){var c=l[u].name;d[c]="denied"}f(d),h(o,e,d),m(n),p("hidden")}),b(o.querySelector('[href="#save"]'),"click",function(s){s.preventDefault(),o.querySelector("form").requestSubmit()}),b(o.querySelector("form"),"submit",function(s){s.preventDefault();let l=new FormData(s.target);consentState=Object.fromEntries(l),f(consentState),h(o,e,consentState),m(n),p("hidden")}),b(t.querySelectorAll('[href$="#consent-banner-settings"]'),"click",function(s){s.preventDefault(),w(n),E(n),p("shown")}),b(t,"consent-banner.show-settings",function(s){s.preventDefault(),w(n),E(n),p("shown")}),t.appendChild(n),S(r)!==!0&&(e.display.wall===!0&&j(n),e.display.mode==="bar"&&(y(a,{position:"fixed",bottom:0,left:0,right:0,"border-bottom":"none","border-left":"none","border-right":"none",padding:"5px"}),y(a.querySelector("h2"),{display:"none"}),y(a.querySelector(".consent-banner-modal-buttons"),{"margin-left":"20px"}),A(n),p("shown")),e.display.mode==="modal"&&(y(a,{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}),y(a.querySelector(".consent-banner-modal-wrapper"),{display:"block"}),A(n),p("shown")),e.display.mode==="settings"&&(w(n),p("shown")))}window.cookiesBannerJs=function(e,t,r){q=e,f=t,M(T.bind(null,r))};window.dispatchEvent(new CustomEvent("consent-banner.ready"));})();